import{ax as x,j as e,I as b,T as d,ay as f,az as p}from"./index-Bg98_QeE.js";import{B as y,a as j}from"./breadcrumbs-hM-pl6_X.js";import{u as w}from"./useQuery-BdJPzJxX.js";import{u as C}from"./useSuspenseQuery-DmxfYXXX.js";import{c as S,u as P,g as R,P as N}from"./paginated-table-CwZSG0iA.js";import"./side-panel-provider-CijlBVW-.js";import{M as z}from"./main-caSoDvOd.js";import{b as E}from"./breadcrumbs-for-path-Cpw2lULk.js";import"./useBaseQuery-6gRlBW00.js";import"./Table-CxfAVGCA.js";import"./useToggleState-BwA-CvQv.js";import"./empty-list-CRPc_biP.js";import"./select-DCJPqsy0.js";function I({snapshotId:t,path:o}){const s=C(f({snapshot:t})),n=E(s.data.item.identifier,s.data.item.sources[0].importer.directory,o);return e.jsxs(y,{children:[...n,e.jsx(j,{href:{to:"/snapshots/$snapshotId/errors",params:{snapshotId:t}},children:"All errors"},"currentPath")]})}function M({snapshotId:t,path:o,page:s,perPage:n,onPageChange:u}){const r=w({...x({snapshotId:t,path:o,page:s,perPage:n})}),c=S(),m=[c.accessor("name",{header:()=>"Filename",meta:{cellClassName:"w-1/3"},cell:({row:a})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{type:"exclamation-circle",className:"text-error",size:"md"}),e.jsx(d,{weight:"medium",size:"md",className:"text-primary select-text break-all leading-none",children:a.original.name})]})}),c.accessor("error",{header:()=>"Error",cell:({row:a})=>e.jsx(d,{weight:"normal",className:"text-secondary select-text break-all",children:a.original.error})})],i={pageIndex:s,pageSize:n},g=P({data:r.data?.items??[],rowCount:r.data?.total,columns:m,state:{pagination:i},getRowId:(a,l)=>`row-${l}`,enableMultiRowSelection:!1,onPaginationChange:a=>{const l=typeof a=="function"?a(i):a;u(l.pageIndex,l.pageSize)},manualPagination:!0,getCoreRowModel:R()}),h=r.data?r.data.total==1?"1 error":`${r.data.total} errors`:"Errors";return e.jsx(z,{title:h,breadcrumb:e.jsx(I,{snapshotId:t,path:o}),children:e.jsx(N,{variant:"cards",query:r,table:g,ariaLabel:"Snapshot errors"})})}function L(){const{snapshotId:t}=p.useParams(),{path:o,page:s,per_page:n}=p.useSearch(),u=p.useNavigate(),r=(c,m)=>u({search:i=>({...i,page:i.per_page!==m?0:c,per_page:m})});return e.jsx(M,{snapshotId:t,path:o,page:s,perPage:n,onPageChange:r})}export{L as component};
